<div class="d-flex mt-5">
  <app-offer-map
    id="leaflet-map"
    (offerCoordinates)="setOfferCoordinates($event)"
    [createOffer]="true"
  ></app-offer-map>

  <form
    [formGroup]="offerForm"
    (submit)="onSubmit()"
    method="post"
    class=" ml-5 mb-5 w-100"
    ngNativeValidate
  >
    <div class="form">
      <mat-form-field appearance="fill" class="mat-form-field">
        <mat-label>Offer category</mat-label>
        <mat-select (selectionChange)="getCategoryTypes($event)">
          <mat-option
            *ngFor="let categorie of categories"
            [value]="categorie.id"
          >
            {{ categorie.name }}
          </mat-option>
        </mat-select>
      </mat-form-field>

      <mat-form-field appearance="fill" class="mat-form-field">
        <mat-label>Offer category type</mat-label>
        <mat-select
          (selectionChange)="selectCategoryType($event)"
          formControlName="typeId"
        >
          <mat-option
            *ngFor="let categoryType of categoryTypes"
            [value]="categoryType.id"
          >
            {{ categoryType.name }}
          </mat-option>
        </mat-select>
      </mat-form-field>
      <mat-form-field
        appearance="fill"
        class="mat-form-field"
        class="example-full-width w-100"
      >
        <mat-label>Offer Name</mat-label>
        <input
          matInput
          formControlName="name"
          type="text"
          name="name"
          id="name"
          class=" mt-3 "
          required
        />
        <mat-error
          *ngIf="(name.touched || name.dirty) && name.errors?.required"
        >
          Please enter a value
        </mat-error>
      </mat-form-field>

      <mat-form-field
        appearance="fill"
        class="mat-form-field"
        class="example-full-width w-100 "
      >
        <mat-label>Street Name</mat-label>
        <input
          matInput
          formControlName="streetName"
          type="text"
          name="streetName"
          id="streetName"
          class=" mt-3"
          required
        />
        <mat-error
          *ngIf="
            (streetName.touched || streetName.dirty) &&
            streetName.errors?.required
          "
        >
          Please enter a value
        </mat-error>
      </mat-form-field>

      <mat-form-field
        appearance="fill"
        class="mat-form-field"
        class="example-full-width w-100 "
      >
        <mat-label>Street Number</mat-label>
        <input
          matInput
          formControlName="streetNumber"
          type="text"
          name="streetNumber"
          id="streetNumber"
          class=" mt-3"
          required
        />
        <mat-error
          *ngIf="
            (streetNumber.touched || streetNumber.dirty) &&
            streetNumber.errors?.required
          "
        >
          Please enter a value
        </mat-error>
      </mat-form-field>

      <mat-form-field
        appearance="fill"
        class="mat-form-field"
        class="example-full-width w-100 "
      >
        <mat-label>City Name</mat-label>
        <input
          matInput
          formControlName="city"
          type="text"
          name="city"
          id="city"
          class=" mt-3"
          required
        />
        <mat-error
          *ngIf="(city.touched || city.dirty) && city.errors?.required"
        >
          Please enter a value
        </mat-error>
      </mat-form-field>

      <mat-form-field
        appearance="fill"
        class="mat-form-field"
        class="example-full-width w-100 "
      >
        <mat-label>Country Name</mat-label>
        <input
          matInput
          formControlName="country"
          type="text"
          name="country"
          id="country"
          class=" mt-3"
          required
        />
        <mat-error
          *ngIf="(country.touched || country.dirty) && country.errors?.required"
        >
          Please enter a value
        </mat-error>
      </mat-form-field>

      <mat-form-field
        appearance="fill"
        class="mat-form-field"
        class="example-full-width w-100 "
      >
        <mat-label>Longitude</mat-label>
        <input
          matInput
          formControlName="longitude"
          type="text"
          name="longitude"
          id="longitude"
          class=" mt-3"
          required
        />
        <mat-error
          *ngIf="
            (longitude.touched || longitude.dirty) && longitude.errors?.required
          "
        >
          Please enter a value
        </mat-error>
      </mat-form-field>

      <mat-form-field
        appearance="fill"
        class="mat-form-field"
        class="example-full-width w-100 "
      >
        <mat-label>Latitude</mat-label>
        <input
          matInput
          formControlName="latitude"
          type="text"
          name="latitude"
          id="latitude"
          required
        />
        <mat-error
          *ngIf="
            (latitude.touched || latitude.dirty) && latitude.errors?.required
          "
        >
          Please enter a value
        </mat-error>
      </mat-form-field>
      <mat-form-field
        appearance="fill"
        class="mat-form-field example-full-width "
      >
        <mat-label>Description</mat-label>
        <textarea
          matInput
          formControlName="description"
          type="text"
          name="description"
          id="description"
          class=" mt-3"
          required
        ></textarea>
      </mat-form-field>
    </div>

    <button
      [disabled]="!offerForm.valid"
      type="submit"
      class="w-100 btn btn-success mt-4"
    >
      Create Offer
    </button>
  </form>
</div>
